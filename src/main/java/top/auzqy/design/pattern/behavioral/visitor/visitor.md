## 概述 

访问者模式（Visitor）

> 访问者者模式的英文翻译是 Visitor Design Pattern
> 在 GoF 的《设计模式》一书中，它的定义是这样的：
>   Allows for one or more operation to be applied to a set of objects at runtime, 
>   decoupling the operations from the object structure.
> 翻译成中文就是：允许一个或者多个操作应用到一组对象上，解耦操作和对象本身。

## 重点

因为它难理解、难实现，应用它会导致代码的可读性、可维护性变差，
所以，访问者模式在实际的软件开发中很少被用到，
在没有特别必要的情况下，建议你不要使用访问者模式。

我们不只是单纯地讲解原理和实现，更重要的是，
我们会还原访问者模式诞生的思维过程，
让你切身感受到创造一种新的设计模式出来并不是件难事。

## 示例说明

### 1. example1

#### 场景
假设我们从网站上爬取了很多资源文件，
它们的格式有三种：PDF、PPT、Word。
我们现在要开发一个工具来处理这批资源文件。
这个工具的其中一个功能是，把这些资源文件中的文本内容抽取出来放到 txt 文件中。

1. eg1_1    普通方法，没有利用设计模式
    
    如果工具的功能不停地扩展，不仅要能抽取文本内容，
    还要支持压缩、提取文件元信息（文件名、大小、更新时间等等）构建索引等一系列的功能，
    那如果我们继续按照上面的实现思路，就会存在这样几个问题：
    
    - 违背开闭原则，添加一个新的功能，所有类的代码都要修改；
    - 虽然功能增多，每个类的代码都不断膨胀，可读性和可维护性都变差了；
    - 把所有比较上层的业务逻辑都耦合到 PdfFile、PPTFile、WordFile 类中，
      导致这些类的职责不够单一，变成了大杂烩。

2. eg1_2    按照访问者模式的演进思路来对上面的代码进行重构

    针对上面的问题，我们常用的解决方法就是拆分解耦，把业务操作跟具体的数据结构解耦，设计成独立的类
    

3. eg1_3    
如果要继续添加新的功能，比如前面提到的压缩功能，
根据不同的文件类型，使用不同的压缩算法来压缩资源文件




## 博客地址 (todo)

## 参考
[参考](https://time.geekbang.org/column/article/221852?utm_source=pinpaizhuanqu&utm_medium=geektime&utm_campaign=guanwang&utm_term=guanwang&utm_content=0511)


